<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: extension/extension-handler.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: extension/extension-handler.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>"use strict";

var _ = require("lodash");

module.exports = ExtensionHandler;

/**
 * Handles extensions of a {@link Book} instance.
 * @constructor
 * @public
 */
function ExtensionHandler() {
    this.extensions = {};
}

/**
 * Register an extension to the extension handler and inits it to the given book. All extensions in the extension handler context needs to have unique names.
 * @public
 * @param {Book} book The book that the given extension should be applied to.
 * @param {Extension} extension The extension to be used.
 * @throws On invalid extension input (bad extension format or not unique name).
 */
ExtensionHandler.prototype.register = function(book, extension) {
    if(!_.isObject(extension) || !_.isString(extension.name) || !_.isFunction(extension.init)) {
        throw new Error("Invalid extension");
    }

    var name = extension.name;

    if(this.extensions[name]) {
        throw new Error("Extension " + name + " already exists.");
    }

    this.extensions[name] = extension;

    extension.init(book);
};

/**
 * Tells if an extension has been registered to the extension handler.
 * @public
 * @param {string|Extension} extension The extension to be checked if registered to the extension handler. If string, it will be used as name of the extension.
 * @returns {boolean} True if the extension has been registered.
 */
ExtensionHandler.prototype.isRegistered = function(extension) {
    var name = _.isObject(extension) ? extension.name : extension;

    if(!_.isString(name)) {
        return false;
    }

    return !!this.extensions[name];
};

/**
 * Gets the extension by the given extension name.
 * @param {string} name The name of the extension to get.
 * @returns The extension object with the given name. Returns null if it doesn't exist.
 */
ExtensionHandler.prototype.get = function(name) {
    return this.extensions[name] || null;
};

/**
 * Gets all extension methods that exists for the given method name.
 * @public
 * @param {string} method The name of the methods that should be extracted from the extensions.
 * @returns {function[]} A list of all extension methods that matched the given method name.
 */
ExtensionHandler.prototype.getMethods = function(method) {
    return _.filter(this.extensions, function(extension) {
        return _.isFunction(extension[method]);
    }).map(function(extension) {
        return extension[method];
    }) || [];
};

/**
 * Calls all extension methods with given arguments by the given method name.
 * @public
 * @param {string} method The method name to be called for all extensions that has it.
 * @param {Array} args The arguments array to be applied to all extension methods.
 */
ExtensionHandler.prototype.callMethods = function(method, args) {
    _.forEach(this.getMethods(method), function(extensionMethod) {
        extensionMethod.apply(null, args);
    });
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-bookie.html">bookie</a></li><li><a href="module-bookie_date.html">bookie/date</a></li><li><a href="module-bookie_financialUtils.html">bookie/financialUtils</a></li><li><a href="module-bookie_numberUtils.html">bookie/numberUtils</a></li></ul><h3>Classes</h3><ul><li><a href="Account.html">Account</a></li><li><a href="Book.html">Book</a></li><li><a href="Extension.html">Extension</a></li><li><a href="ExtensionHandler.html">ExtensionHandler</a></li><li><a href="FiscalYear.html">FiscalYear</a></li><li><a href="Verification.html">Verification</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha11</a> on Sun Jan 11 2015 13:06:55 GMT+0100 (CET)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
